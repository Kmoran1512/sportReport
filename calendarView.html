<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8' />
    <title>Sport Report</title>

    <link href='./fullcalendar-4/packages/core/main.css' rel='stylesheet' />
    <link href='./fullcalendar-4/packages/daygrid/main.css' rel='stylesheet' />
    <link href='./calendarStyles.css' rel='stylesheet' />

    <script src='./fullcalendar-4/packages/core/main.js'></script>
    <script src='./fullcalendar-4/packages/daygrid/main.js'></script>
    <script src='./fullcalendar-4/packages/interaction/main.js'></script>
    <script src='./fullcalendar-4/packages/google-calendar/main.js'></script>
    <script src='./node_modules/jquery/dist/jquery.js'></script>

    <script>

      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');   

        var calendar = new FullCalendar.Calendar(calendarEl, {
          plugins: [ 'dayGrid', 'interaction', 'googleCalendar'],
        
          height: $(document).height()-20,

          header: {
            center: 'addEventButton'
         },
         googleCalendarApiKey: 'AIzaSyB4It3AW2oTsPwnNDXHQ1rIi_aqlJwpRAM',
        events: {
            googleCalendarId: 'jerry11111cat@gmail.com',
        },
        customButtons: {
        addEventButton: {
            text: 'Add Practices',
            click: function() {
                        //add google calender link in here
                }
            }
        },

          fixedWeekCount: false,

          eventClick: function(info) {
                info.jsEvent.cancelBubble = true;
                info.jsEvent.preventDefault();
                //openNav(info);
                openFeedback(info);
            }
        });

        calendar.render();
      });

        /* Set the width of the side navigation to 250px and the left margin of the page content to 250px and add a black background color to body */
    function openNav(info) {
    document.getElementById("mySidenav").style.width = "35%";
    document.getElementById("calendar").style.marginRight = "35%";
    document.getElementById("mySidenav").append(info.event.title);
    }

    function openFeedback(info) {
      document.getElementById("myForm").style.display = "block";
      document.getElementById("workoutTitle").textContent = "Today's Workout (" + info.event.start.toLocaleDateString("en-US") + ")";

      //Pre-fill text box with data from user
    }

    function closeFeedback(info) {
      document.getElementById("myForm").style.display = "none";
    }

    function saveFeedback(info) {
      if (document.getElementById("feedbackForm").value != "") {
        closeFeedback();
      } else {
        //Store this for a particular user in an object for a unique day
      } 
    }

    /* Set the width of the side navigation to 0 and the left margin of the page content to 0, and the background color of body to white */
    function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("calendar").style.marginRight = "0";
    }

    </script>
  </head>
  <body>

      <div class="form-popup" id="myForm">
        <form class="form-container">
          <h1 id="workoutTitle">Today's Workout</h1>
      


          <label for="feedback"><b>Feedback</b></label>
          <input id="feedbackForm" type="text" placeholder="Enter Feedback" name="feedback" required>
      
          <button class="btn" onclick="saveFeedback()">Save Feedback</button>
          <button type="button" class="btn cancel" onclick="closeFeedback()">Cancel</button>
        </form>
      </div>


        <div id="mySidenav" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick='closeNav()'>&times;</a>
        </div>
        <div id='calendar'></div>
    
  </body>
</html>